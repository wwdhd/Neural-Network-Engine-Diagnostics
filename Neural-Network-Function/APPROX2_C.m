function [Y,Xf,Af] = APPROX2_C(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 27-Jan-2025 09:57:46.
%
% [Y] = APPROX2_C(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx13 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.478245119066102;-0.767979753793275;-0.818613057514181;-0.822058988794958;-1.71701401731793;-0.46311536520068;-1.75800290819691;-0.89473018138119;-0.501004103346609;-0.913903085472723;-1.87669155290809;-0.0999515141114071;-2.86771571900163];
x1_step1.gain = [1.74011263168283;1.25342055245545;0.318565154044357;0.582172938929942;0.705602836470487;0.473326461191867;0.875623886723257;0.290604743232745;1.32397990359124;0.262086606210731;0.228939156572952;10.0034254004094;0.295335628497466];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6795472718362096654;0.91820900130294380581;2.5182480695795650405;-1.1278682000895903226;1.7530148889682657387;1.5664174022028776179;1.6093087326575887808;1.160102933044275586;1.5323770726271721543;-0.91721317438505711728;0.98536475972377191024;1.133340244639822858;0.67380566107973693946;0.87088823605081855384;0.55848640457133558179;0.28490690681259223105;0.16964079955248215215;-0.70397037094446901495;-0.0052345154710888479668;-0.15781488197432114173;-0.23876373033780307065;0.040269718618231732654;0.59458472085025149134;-0.42488812224810479368;-0.74430075091833514112;0.72580785927475843788;-0.49255800084673440065;0.50361183448662072415;-0.085207036937066771287;0.81313936903114758525;-0.57574025905160608474;-0.84319181711488944142;0.95046167855244545475;1.466413488496694173;1.6050869315789255687;-1.1136352440769916594;-1.6931314363899445663;2.0469869384675014601;2.0763913345999078786;-2.0574961783470886445];
IW1_1 = [0.16514705736718121587 -0.84796726764409668942 0.81803240686684675076 0.30647838624296303012 0.050197166106389086437 -0.019210535742032755491 0.80725920867929190639 -0.58243588337002927258 -1.0214612119043120497 -0.40716748179155798359 0.58794698552171775763 -0.77547846497995653881 -0.28993433839841209476;0.0057689576309991261183 -0.25943924043945920666 -0.86572395831903981023 0.025252709498349075468 0.42399471200508948021 0.020093433161540177889 0.18156559007084610569 -0.024349302045521943605 -0.2442546342174788665 -0.32788420288943492809 0.62122082735191175296 0.015410451487362305384 -0.15968673789872844804;-0.16191454754983808373 0.16668112907441579029 0.088182988515404597818 -0.18074361487520781977 0.30679568516945932011 0.35986983313513226657 -0.92287729691854503145 -0.6352736410816629542 1.6170876175769142158 0.00064719655498360166568 -0.83021912588287982704 -0.4380682385327427375 0.12903887849648132402;0.56510742477818309837 1.6434154802494171932 -0.320478566310928914 -0.71665480863109454202 0.48601197978948729173 -0.029050638422881667339 1.0133058950544688859 -0.42330609149377262934 0.33063904713956249193 -0.75071051293785240333 1.0609768350940580461 -0.54209047909466789861 0.62262174180226215192;0.18390349458072705047 0.45080366127832488532 0.42623497406360771889 0.30064288469546956994 0.15864744434654209915 0.31478645538872723764 0.17183437195939640918 0.42899216676404694493 0.41556411335553383735 -0.50032362545356245942 0.0062833081095155160489 0.45157377195137138326 0.77344171967146824187;-0.98775528141009172334 -0.10749190591733615019 0.36275094892740794572 0.078497017484423142752 0.29446727631130964475 -0.099005581755071500605 -0.63527678693196265591 -0.33133164314803942307 0.87976939272578980056 0.046824426984458253354 0.15654517025703038047 -0.3177650607100248048 -1.2738054473032363045;0.034101389732103595809 -0.37335585917517943866 0.35239087556618764463 -0.68044725008002027167 -0.45276980660437399218 -0.17827788758122986579 -0.47731852347681541504 0.17576822501834463153 0.37451453358916991787 0.0076972568413249016495 0.41388894421815985991 -0.27400890644440961674 -1.009970110505618246;-0.26231933214638786245 -0.25100529170616431296 0.055736665355309390757 0.12248144051996683046 0.67961436488635873499 1.0894554839904520005 0.59906113013667172673 0.10838709591241899033 0.9283947633810539779 -0.43493155496338575805 0.20735422790437665896 -0.36137873324045532986 0.25280029479265780923;-0.038060582148592828067 -0.11095237362731366626 0.84695054384603740694 0.23829576565945179145 -0.74621205893307251955 0.71137152032580086569 -0.98560798688934192491 -0.75255059299821225327 -1.2943011978186786948 -0.79647199169684468334 -0.56589265960605916739 0.34955302722803527349 0.32307941651222032986;0.24992248947266917924 0.45534761457301753396 0.19275887058778967686 -0.74238054335202163792 -0.099701644657285426465 0.50024674458250772968 -0.53648507243204013317 -0.53350248879608686003 -0.17807402617763590236 -0.20851799113984278988 0.4638125754822375324 -0.25122834810304800479 0.94080598372165902266;-0.6132703256453798657 0.71214542867062458065 0.13401296494519371327 0.79729885926188093226 -0.24206623245758512875 -0.60520609425903948431 -0.84700190584256973558 -0.46818000191203090754 0.21579980395095521573 -0.055893369896244181338 -0.3111024074707372522 0.30318833385275933967 -0.86622768369938152322;-0.5451751309392147693 0.033268194200855076559 0.84598900227688744735 0.07800005839710220934 0.10163933914945451342 0.56105114373557807284 -0.63027778179500892897 -0.73400650266492362128 0.92542241607521025237 -0.084850074032077532626 -0.3386168335109460692 -0.075168270066445941335 0.276892456906364548;-0.38373719859359550766 -0.10808021612242663112 0.632142526348345557 0.13436402385909937407 0.49686240627832306549 0.89373147022954302354 0.0029127276727810551965 0.074726559146765167418 -0.2022736433136622658 -0.4979820007681630134 0.025599501524021919807 0.16267074577356030463 -0.34464320188890529284;-0.071837552448408781292 1.1189851793946219427 -0.67598376248167946212 -0.64937367689051161967 -0.76740616757496660227 -0.39968293914977354175 0.0075771225843699191449 -0.8444161043466704708 -0.92377540289255088979 0.8296471927261620527 0.028462980754682776913 -0.38712866024937364617 0.85040235110088524539;0.029557717234974918707 0.34796089031194571417 0.1745877722972879742 -0.25284844964619412888 0.52134948649652990138 -0.064519881046844765327 -0.1506592364601889722 -0.024465769544848258582 -0.1566829084723193044 -0.73745071861936717372 -0.082206798067900904714 -0.22132994335095851346 -0.69104730239597145225;-0.030236187355490440343 0.75157663220421888628 -0.83340650658957649011 0.33997520087773547282 -0.23727536650565908549 -0.37037182511807076324 -0.72928163316101202174 0.18020200503018871108 0.10113518639392557463 0.37068075867393251999 0.35643868394805999777 0.36833115825980561331 0.21122652933350866133;-0.78141437581814321423 -0.51115776929369438619 -0.0066771761371859778 -0.53547733671685560086 -0.32911645912337905706 -0.53267746536805193891 -0.042402495683516831793 -0.37968002128857369915 0.1435551638177244016 0.13672131420649197286 1.1699463254117303812 0.40897322179973849554 0.41377186652646286147;-0.50409278833339832282 -1.963529785790078197 -0.10386256201870970595 0.1058602867917393664 0.93564031713396467183 0.97106420621438493956 0.31769835209608793258 0.3293505087716224744 -0.50702893070343724169 0.65962148815894572351 -0.81841162255059252129 -0.14024034232391824339 -0.13922488815019570807;-0.088469752189604719539 -0.036262427612962305767 0.30740639901690169911 0.066194564135673400473 -0.094051597536314271442 -0.091884272748988637947 -0.16122328724404469402 0.098716564119773211883 0.047009059540902883856 -0.024310671272887343641 -0.13505349653269621557 0.076142265262113123514 1.0021873221398465148;-0.14511253049748784605 -0.21528356936054171555 0.0023091726923063007892 0.43230052535777502287 -0.72487578211694991825 -0.21332761582620390906 -0.39252205632389319812 0.51571123232853466334 -0.089200068196663997999 -0.13580299269001061546 -0.64273524577242546751 0.075082347303487256829 -0.91775735873629715744;0.32879986835131047584 -0.50991985590754951296 0.60356414798312918446 -0.50357125302341820827 0.40653753992173896625 -0.12707014014474682373 -0.050198621940340332204 0.12626662498102611543 0.11704187811400343366 -0.52012981393360435689 0.27335962770341304395 -0.15565092144760200865 0.6010603400728591339;0.015082763180534503045 -1.4662810812513007441 0.44531330636676413892 0.48805292576381786862 -0.034559620087237549746 -0.1902611427485138007 0.42365336335126052569 -0.031639045461480538868 -0.56224278627172019629 0.792116465417358806 -0.73654214254493954872 -0.441926826878389023 1.2038966909382424753;0.9399198319692261272 -0.20878273788063073102 -0.91439271624513496217 -0.69536338849573453569 0.92368276686188666158 0.54807725088505943045 0.37369464731873897057 0.25263429408929477527 -0.4675352697287989967 -0.0014056464547598651604 -0.22957995231609859554 -0.44570206303555065519 -1.3639050537249863826;-1.5953929525433767633 -0.32446538781526057527 -0.044031701733842049107 0.68728910241256735425 -0.1357729452838246087 -0.73788875993685176802 0.37435045548205470034 0.51140073637109439986 0.76936543834964299382 0.68680735112634905271 0.13598324618185630985 -0.28289635552322933698 -0.86018914948359226358;0.11686819586397621806 0.71364300063117791506 0.15938807966063567312 0.63425792915947609707 -0.20688709164288668352 -0.50194396773199945194 0.28925693625138293452 -0.71423370607852121328 -0.34316912457120735125 -0.22896257485621659966 -0.65917203802259549672 0.37663225519284482257 -0.94363475053950940374;0.6587084750139066136 1.0476721116766323227 -0.14013061689054751024 -0.16691004402660564176 -0.828987521018939022 -0.21690437382191060656 -0.75874742905722636355 0.78883079669852973481 0.20782083533613160409 -0.63263393639669374124 -0.24428773947483950479 0.055340288407825274919 0.24039486392337078291;-0.5937005611380147263 -0.21085248815965096369 -0.26762812036323802012 -0.39225039229579239386 -0.27102193080156566918 0.94680527550658277747 0.42869340259797594772 -0.032758792358048002824 -0.19456466498308064295 -0.21468764890867134132 0.43478083756681196181 0.43226692425064222602 -0.65659348768102410165;0.47547502320227408301 -0.94427681125747586766 0.24587471780725550508 -0.40020383634266437634 -0.41589004047047894996 0.52754132265617625919 -0.15667813130574873015 0.76421120448567270156 1.1387708556815223648 -0.74232068876242363054 -0.1526293940481083522 0.71156908914696737067 0.27049542303300205814;-1.1902707023862122426 0.0010628203361498708701 -0.60314891068443099442 -0.14227352995539249703 -0.31129914729000879303 -0.69566144721502132242 -0.65113074117810199049 -0.55362181614046956923 0.17610992091790894643 -0.33318200717201124084 -0.030207626297400782395 0.91935718969383140031 0.31753964506286885827;-0.029131934548848034683 0.36971367131463139799 0.47441215626811861217 0.024382598705862287142 -0.16672727045015317549 -0.29081771874773432174 -0.57195114413417547095 0.043705190903486373921 -0.16603310208597077402 -0.23244616741293466777 -0.28100022038378663636 0.20740367305268481157 -0.60907679612208942554;-0.07453074442904639163 0.019209688049998806247 0.49308854436008991984 -0.16588309551406230091 0.10056921007524585732 -0.22234895131330414952 -0.3112382866709933471 0.19061138934671664757 0.080275052297883717212 -0.26669667164873755993 0.092685588374202682038 -0.023161258083869831759 -1.1627471301120866354;-0.10323351466287317146 0.31078091514914796267 -0.27925117755692147048 -0.351197240110078579 0.11243367345601865126 -0.12954660100965026404 -0.29433445398297730655 -0.10804896509158110063 -0.6303450533970863523 -0.50776115092762719172 0.11692540544215193621 -0.057196642745827655507 -0.049950767650627551919;0.20017769081741260129 -0.44626230908673597542 -0.37004640321334358877 0.08408315356029237575 0.39237998778939298106 0.23221721878402135086 -0.070133573527003348347 0.12228746659716176193 0.56536950703505139959 -0.17991366757426313638 -0.35757380052695897366 -0.44189969981930216081 -0.13355383217107563709;1.0046384033625539445 0.39242147623339868057 0.88427978795939965462 0.26552393313773220429 0.31080553455666770635 -1.9880422039477188001 -0.34782994517174026239 0.31223883769093035978 -0.016393098120419294372 -1.1711375662772942619 -0.72094885802118913176 0.48360164625179707931 -0.27090245683822405942;0.13816178058198996803 0.54332115935455060907 -0.99222119923720675239 -0.17769983422258681105 -0.46350039851843632954 0.42908291731223524579 0.80899990070884786331 -0.49504217708119396812 -0.14695912107784031564 0.56664335021383938074 -0.96901658211520191877 -0.23126067584684151246 -0.19996565425854384568;-0.1949658288524733496 -1.0201529359388232798 -0.71984795996819006536 0.8140892759232695175 0.52482815599895027425 -0.85387437318910852646 0.53114012356537065873 0.18270112525079676424 0.78721496373960375692 0.93253618921185554846 -0.11214773216966805736 0.072091284602376917712 -1.4195654056467641446;-0.54873008837750225641 0.58744140548337264729 -0.79763255763502116658 0.31388926861881566444 -0.22332102448476234824 -0.15002826054104459463 0.63384837682412487059 -0.55230779375612126803 -1.5462662894120999812 0.76255434772430330526 -0.32425141089562392605 -0.035330092348196714958 -0.85848539227183651157;0.22389477818864725323 -0.28162296240962036986 -1.1934264647116952229 0.019897296326627376267 0.17465864189420188257 -0.26797582760309707206 0.6765037410462977352 0.20097697773849232394 0.54568952374237833514 -0.82849947322501416025 -1.2445459722245491019 -0.34348548565928194165 -0.70193993316225156143;-0.058844598469827549825 0.1565072453187200674 0.5822419950314433601 1.0037642193129410195 0.37992447502766246714 0.24122571739142578684 0.21324857886955075892 0.48414921570524582783 -0.64810794512003211398 -0.28843408953257632099 -0.19388086454039524242 0.61637170823385167839 0.227947391743799882;-0.76384165370288337193 0.39321038985436640445 -0.52091474109300517359 -0.81999834662569559551 -0.26543604125571418351 0.80600431614582557227 -0.54131874994505424503 -0.47421685297263727055 0.47097899007568072571 -0.75710002197577686012 -0.25250794655631897401 0.28592702877903730663 -0.2965505811676097947];

% Layer 2
b2 = [-0.30228977979684962252;-0.30140921458386998877];
LW2_1 = [0.098305451394050627489 -0.11749907492140188037 -0.42089835980301470997 0.078332474517086053689 0.2747599713275645783 -0.231652488030461845 0.21138423634898034775 -0.19932526694504790199 0.24344251140747211193 -0.46328179006044228894 0.19327852124894059904 0.41508213649848846316 0.059378665659061774518 0.14652727623158287584 0.33730616442742727967 0.061506113285786791212 0.13945067413683881474 0.12022748423083275127 -1.5339285545932190846 0.19788281625369255612 0.30022020255291781421 -0.059431288628025748244 -0.15713618681894303553 -0.057250507810775362605 0.20326579184749646312 0.21731848391477889826 0.27033221403083335099 0.035020529741003114665 -0.0014953915998449536506 -0.15845649768886005404 0.11635072983566396854 0.30165473351287286352 0.75495001307678943903 0.15998238014491980574 0.26131457180315809108 0.27735419184615184296 0.15583228070638815987 -0.24660435902940427977 -0.46201373696814818093 -0.22104817019095843178;0.071057482686754561141 0.060898914849325878895 -0.73064732860953451876 0.084187077914831126568 0.25941362554050717559 -0.38802443866622471358 0.098312026409089300905 -0.12522732452360887945 0.27873128067362118454 -0.40341904007680207123 0.31920385403989376405 0.57901666541315299774 -0.13998478755406495999 0.1994137618775884413 0.56284925484536640905 0.095673176380151825349 0.18268850754137050396 0.16766893809303837215 -0.53081472713182098477 0.13297645079459588513 0.45332777264157703145 -0.073423027204851609717 -0.24343786825699439968 -0.10167849245822709048 0.21518758988987901626 0.2751746126635502554 0.27748730355893014288 0.041087068300779260033 0.014036019476049162169 -0.71292626886112042683 -0.38585405270091238661 0.52587751435985452542 0.91525841331941182322 0.20790067832106629009 0.34484480573369946654 0.25212485564007924843 0.20526336822797791593 -0.22746650218762018425 -0.30067829128749190559 -0.27164373593890228653];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.363636363636364;0.363636363636364];
y1_step1.xoffset = [-6;-6];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);

    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);

    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;

    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end