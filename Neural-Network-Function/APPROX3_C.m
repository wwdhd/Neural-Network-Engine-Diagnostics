function [Y,Xf,Af] = APPROX3_C(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 27-Jan-2025 19:24:20.
%
% [Y] = APPROX3_C(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx13 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.452194862982207;-0.75513499798729;0.37204974821634;-0.288826949421024;-8.10390898832512;-1.80211090895129;-2.95149072486076;0.21884068643495;-0.325817737996708;0.521004231763379;-0.638600581544105;-0.0999020136223772;-5.50001194767216];
x1_step1.gain = [1.48749046865026;1.20964901273597;0.244727477988373;0.433376099596001;0.253233552338417;0.591174413296632;0.62431826658486;0.178486461115012;1.04280286502664;0.156848568468262;0.159576756202406;10.0051725621366;0.39082768438509];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.8073136529136344386;-2.6117917852326906214;1.701099922974090628;2.0127581338750530904;-1.5457989403418181951;1.764615050839157151;-2.0070042324288546176;1.0937202431010528692;0.54548796125102827492;-1.157486412847807733;-0.83762537476540455117;-0.91468522103225857744;-0.5999569670496898155;0.55315513804570004552;0.83853898967971451928;-0.1777960827104934638;-0.013392868580850030014;0.96973773425105713741;-0.46154246676035776131;-0.24784194599050279884;0.25074278307792008391;0.65851208879380596084;0.43952210300016159028;-0.47074040476208217632;0.23735520105230517585;0.27732662314242290114;-1.0487779352118782317;0.016759276320432808793;-0.37044330121815588486;0.3737300907760101043;1.3233421288778239866;1.2389708983282818888;1.0856020056064312751;-1.7465110769108851407;-1.7867709092128560844;1.4909158099964503474;-1.3897380223445077174;-1.3371753260177854372;1.6392659580525972274;2.6766796789619844432];
IW1_1 = [0.31647439078960470926 -0.49249285996099745333 -0.013238097085506233055 -0.26078235512801589691 0.043758713009720333342 0.21125983746230203586 -0.51832745782636169274 -0.10867585392225180552 -0.39078622890370251497 -0.53022103829197375635 0.41032455237886722443 -0.93842878819710662253 -0.74248787916993108649;0.19503565867857206029 -0.21986358854219006931 0.65953067698232770155 0.2930264561069653162 1.1538356237910203372 0.58209735647195737229 0.62237762955871556159 -1.4090388690482760214 -0.14890394870059703303 -0.21919765388073575441 -0.27027701948354609929 0.12803749878768794224 -0.79462309227826255498;-0.69926242362116652895 -0.27574441174713198999 0.2559540107590883018 0.20173824701234063794 -0.35669239083304832283 0.43193644828536054137 -0.086359716771217509557 0.35523564428993426034 -1.3133831431802993617 -0.41911753774991644672 0.49005248247049548738 -0.38943427583280099125 -0.89923391951656395094;-0.046822596410676015077 0.30311045464312391662 0.54280303002654428646 0.51797441361078977451 -0.35594241980611140974 0.19127391756568684622 0.33177289687639788252 0.856360139266803988 0.11394448882361234154 1.016873578138109302 -0.3498299518888347559 -0.052569176873459633192 -1.8585003731794380588;0.49815521187023170668 0.69611133843120986953 0.47710453290338905585 -0.095188338921845430662 -0.64962644191659602022 -0.15689213316727956826 -0.49936023194146478277 0.62435675566849124785 -0.67470903635304935175 -0.069967876189140840171 0.31628861371025457361 -0.24258413878223827886 0.38864438222473496332;-0.31497977386788539311 -1.5092260582320919937 -0.33774791317998381635 0.62461923926510332095 0.14278105892094120066 -0.59161092002827730951 -0.31102839007578642061 0.11780649632533304882 0.19591528344330072509 0.55061785558398790297 0.7112573542737045118 1.2149454056117270362 0.22324252318748424861;0.2631981103447990078 -0.94540789237781108767 0.41527737444238199682 -0.042694923762509662257 0.24608707906882409944 0.35414472193820684121 0.047666092313290601978 -1.0453444120396104822 -0.36495892449696459847 -1.1231118629174778878 0.098751532052086046787 -0.12664439108286790203 0.46857046599280410826;-1.4041248486148212304 -0.89352305006762455797 -0.027247011185011528467 1.0473851263536080314 -0.51768928711323869418 1.1406873460632673822 0.27279622953033166866 -0.59375086506281660181 0.0020534075796222184263 -0.058323263763595603604 0.29548923829991813328 -0.60619697436705410887 0.15926540963915847282;-0.34981615117390246761 -0.20545969738456093534 0.44260256187461466393 0.19429119648086584649 -0.88048239815527584717 0.66951793981840790337 -0.012028024573600297475 0.89200133232358624902 0.076629132382380449329 -0.3104256321432637411 -0.078423942892993675491 -0.24732169596449204985 0.95419199324039027932;-0.46781969399417333566 -0.33420815030059053408 -0.32724334850229619409 0.33179695697736133475 -1.8237885887394953421 -0.12920700933543599609 -0.13834658633768093239 0.68625484823487448161 -0.35983920977367006566 0.058969523195330136867 -0.17730627510831303839 0.16392935714926304414 -0.37768983303686043396;-0.42616011332262759836 -1.1840614620560472314 0.2935191356015291464 0.94270686175471873902 0.61110353214741242045 0.29356060674622064255 -0.68940562848195119372 -0.28948265305678622106 0.21355009916323258734 -0.84076673029483772748 -0.11576474075633237659 0.21436851912439280898 0.59059658062479614138;-0.011586228600761798446 -0.60151062704090962896 -0.1794135076326763556 1.6131321043061537246 0.15269113255353511382 -0.39195419646466095331 0.72698773429544982783 -0.34582918988289201856 0.45641241041767310893 -0.26271114863822969676 0.5167473739420250789 1.5061514926405541459 -0.25705708884411471171;0.29297155323982110309 -0.20146252277808235354 -0.60560655586745226753 0.60908172975989594011 -0.50651502466086240073 -0.23309583897601163227 -0.096318195980042459192 0.50149567695216756835 -0.022592385219690210019 -0.79898692507099799975 -0.93215565331611593969 0.12017640458634257228 0.31800924033502880883;-0.045087593187947763718 -0.31362968583317685223 0.051606258996818185625 -0.28320203829043677501 0.59263256373001726995 -0.59890663028451796013 2.0125005293599045331 1.1960416176238111152 -0.53801701308314642258 0.69356159682118456722 -0.02205504263674068488 -0.25310582369793799273 0.94006843303136911061;0.0095539755170235274306 0.15673705023100739653 0.2579860008512558367 -0.57796766066256599625 -0.31957335516295548583 -0.2027707559353212341 -0.89693037779680440114 -0.64298671991397382541 0.90477343311857938435 -0.15611836652373417555 0.39904133798890822904 0.51671849983435036435 -0.1680456346278158819;0.39684551565276765528 -0.50379823470009721387 0.41913017324073276182 0.096696976376289794919 -0.3524719649662474974 -0.68961478038519841149 -0.26403738138414911685 -0.25486647092259662184 0.69138258240151262424 0.46466790971062527094 -0.68585463460588136364 -0.36708266910449866005 0.68464518670206486739;0.07168819097252054906 0.0099447487115258623169 -0.22237378940853042009 0.27907903852368010078 0.16463676696261558829 -0.055474897331625395991 0.29998339693281061979 -0.23758734742359716163 0.15418231145098351687 -0.091073923171851409175 -0.51507521224035845986 -0.0437250453089583907 -1.5737871064931043819;-0.45596858707298076885 -0.71131331842439515789 0.31479031075883245894 0.43451013521005338314 0.32117192228102742213 0.5206903453342189847 -0.20317694336748043371 1.5233682230818081926 0.044689336737139213895 -0.81650584513553492449 0.23025954670798590151 0.40763668927307594725 0.38285432908214506176;-0.14837135791498679005 -0.41878903286805774231 0.33913908494818106876 -0.13398012212527971032 -0.28619735962338654911 -0.31511717166728453465 0.58992035005789311697 -0.45222811585473005058 1.070572132039552038 -0.065138589508758198976 -0.2373766279028207693 0.41362245236744998866 0.57906588386604163077;-1.0654738996612638235 1.1079321310449510296 0.6972915624687719971 -0.17606843725228549236 0.63155663570251308059 -0.11752210010182664868 -0.52925676634686913413 0.63259712548009350286 -0.13818087200946049808 0.19950745076108869491 0.73958468702109969595 1.1728951418663093875 0.53254535751435116975;0.18256184670330372066 -0.16145521113038369121 0.85261964618161456553 -0.18710528804357690058 0.63333248179671608469 -0.57410251186990657324 1.609975333466526326 0.78829789527854809972 -0.71651700676559371139 -0.95719531193164864025 0.049774427147932537308 -0.16135768221269475298 -0.15788000296086157626;0.23673490895887044916 -0.13734705937068836246 0.23514729292084859957 -0.53461755250409925821 -0.91285521908729394536 0.25507293172700618022 0.11755927504011151608 -0.72231291233301075927 -0.0049064537439796052087 -0.11826520797411636809 -0.027930723119416647759 -0.17731653680453007826 0.63483458968753647689;-0.90713834333031628798 -0.033184568813751258443 -0.65283417789169984058 -0.48394706803916398563 -0.668892415977622945 -1.3498020532123085058 -0.040512052950804317009 0.057358041809287614587 0.258817717584160778 0.10814664612771615615 -0.15063907223333439234 -0.15091890407174293753 -0.10404642847018347185;-0.022623047151670669375 -0.069972953717454072775 -0.28280841751899526981 -0.036693416762284949972 0.56539687083730783002 0.25000441901941233835 0.084985473255165477902 -0.017394734982934020873 0.13611015177372681739 -0.61787435542234936392 0.13236674822155503062 -0.027891720689211509099 -0.42254457674935924638;0.62021169781601692694 1.4283545767704517448 0.87222699247799062583 1.3371939385055922056 -0.61189769122080694963 0.52248578425564273786 0.79522063279576316042 -0.56683201402825311721 -0.30505083728406673371 -1.3031478385807317988 -1.1539667934688935258 0.85722312363964026094 0.20745255190503997245;-0.15882366427432395573 -0.26667095437778137734 -0.62978642531746398259 0.043503726584475321815 0.12610018562822192245 0.18832430045263653939 0.21462305618476520963 -0.44698577724475735407 0.0024889975498188438366 0.54173386762862973942 -0.049934160854627970827 -0.1320080697998768926 0.47220263963403164009;-1.0525672541939854465 0.63264259488928953346 -0.2684566750906864363 -0.35121286485496527874 -0.63677529543283861724 -0.90339296114036715668 0.44289647042152252565 -0.57535306894120741283 0.21643006953821389282 -0.19180269329421709146 -0.71026630430539783312 0.38346408752380528595 0.63854127780655556279;-0.10217115699722449651 -0.24147272637625549763 -0.16952264752008505688 -0.2397280595520462354 0.14279357352495533617 0.019662779437870449989 -0.26334938639124083615 0.2285146462066451889 -0.078212411622488958729 0.31606696857358212993 0.29308576052135165702 -0.16459051052318840469 -0.33781249375819699665;-0.16488458950403039882 0.24946263516457473086 0.32999957589817363601 0.22557629705941015241 -0.0057640942743179754415 -0.3830685032957325542 -0.30696884130344942454 -0.71354275921410892369 0.21832899654180251692 -1.1467784442682562585 0.14944506676415653112 0.80267616296248611718 -0.78453808535297508975;0.4037653296223131516 -0.0097632538570846735815 -0.091403808419307966404 -0.00041309169195782174944 0.059241455779584770158 0.66287736291837406899 -0.035776193799328920297 0.17604041770791617472 2.8463944923083628336e-05 -0.024790696385481685721 0.70331694347638251674 -0.068454299160247172873 -0.17920604586057048424;-0.17977429540458805812 -0.46106879182183363453 -0.18000075249879493589 0.063035291305187909905 0.52285386663615907032 -0.32808609882419131898 -0.48408153451471802597 -0.23148027349925970331 0.37499415796434165671 0.4888055771244367298 -0.19378879410458813015 0.38477379592337035419 -0.012721261937107306017;0.027500911345259795859 -0.16806902176412957806 -0.49901920578591957289 -0.97411393927729750253 -0.95222446733989096757 0.52731935825842790599 -0.58840643313573415263 -0.24177277098777233411 0.9372977507393951413 1.0491995528282764827 0.51279410991783946905 0.55987935694849799706 0.95019534533409311106;-0.21099762333923396951 -1.2851937134758888437 -0.17346602636922381357 -0.10912791856912976152 0.16970927781224365294 0.63418770975822780223 -0.37484396234441741402 0.00892183312073298318 -0.76815196682551478702 -0.87025777587029273796 1.1513761665699402403 -0.60244927587530638924 -0.49657516925464006974;-0.61022008334075128477 -1.0699393905302985175 1.1918637552733291063 -0.21847450511846316923 0.62203021317282236602 1.49960945853278238 0.24202421316631428372 0.3698239724041362253 -0.21904792116318116957 0.40674141965823179534 -0.10235627521753365432 0.59423317852542123507 -0.2177339561070870122;-0.27943795631762902154 0.078506441736155452293 -0.80810648990368327826 -0.068321422157899158734 0.32162642967444560194 0.45529854737265956777 0.02446615241233289148 -0.62945549473952633335 0.078025701937281838338 0.63791977014898826326 0.17036055520843423894 -0.21175149294890427409 0.62330671617539901153;0.19567205921591748763 -0.0010326294460700075062 -0.024141435459941129604 0.16965009549095200203 -0.04317403821907162681 -0.60924897261665966752 -0.3569002032289826376 -0.48767330218314070001 -0.039191610796561943131 -0.58925871188938738765 -0.69072669311526735392 0.031711675938768515981 0.46478287069355556094;-0.1062117211440135045 -0.48487887568267784566 -0.3974665039811867695 -1.0549649726790939486 -0.14779397351174899944 -0.19835149826977513388 -0.52738680415226657505 0.23118721301555975045 0.31720736124571868864 0.3478198815726151194 -0.099992191559716475657 0.35073467116564888135 -0.92494460887999274679;-0.34154418961417642997 -0.38887333694817527441 0.12255574429046278695 -0.91927817093626262857 -0.4241539929793061714 -0.61674795502979207207 -0.62335215498971330295 0.56157503681689124875 0.58572673300571365118 0.65986924971144789165 -0.34797217734114149756 0.16624427153744417152 1.1358445015586895455;0.12111259663269216547 0.018539209263637598801 -0.24322655207659740761 0.29187667555821344978 -0.21062229831555476234 -0.89567108128652794807 0.11394241588114419061 1.5201855160586259519 0.16734771547793680924 0.33278448698550006091 -0.72379765991277777992 0.16167469305507237154 1.0633324179838421486;-0.41948713530709774711 0.47818521319307449868 -0.79102222026308577352 0.30866366162954761432 0.16003891853544610635 -0.76629878937313500309 1.0652547980880961997 -0.024880833461529007489 0.4894248001567427786 0.15624872266131928367 -0.87315734684714918501 0.66005094678953224463 0.13791845131757093923];

% Layer 2
b2 = [0.43337470598306632175;0.34759366527582113982];
LW2_1 = [-0.75263251775027106838 0.5596084909354519521 0.32629698505159715483 -0.013064530416030006865 -0.11199329357568166277 0.28629674669118149177 0.26711375502876899546 -0.18654261356316190201 0.8280252918728474576 0.18622716111447337739 -0.27319634811603765723 0.17038578984415680972 0.29482944392141674506 -0.63253013250988487925 0.56095482893134418489 0.1980487937501423934 0.42580550904906810938 -0.32054939347281174999 -0.040733129535032504276 0.11280317819633704779 0.74509361785740590989 0.49267191752931288606 0.17057236063699823814 -0.49840221610117946272 0.2012794985571692008 1.2012365154422772751 0.1914302257824313791 1.8297666051006005183 0.33283851907212674837 0.7375362824075557544 -1.0733074248005782803 -0.39533693151010218525 -0.27620016451426798731 -0.11663625277488177956 0.50711234325158871528 -0.076350542972841856093 -0.23607114325557315704 0.4644084539032392045 0.72590423157633676698 -0.58147018520194226898;-0.2443618401735356549 0.24768826313920394577 0.12293892498955232007 0.058415846579149832696 -0.12840097342920342438 0.12501071872180469224 0.16035063458467049835 -0.091782804509222395972 0.34963592652545133488 0.02993618105867145579 -0.13795567624994056755 0.071350371079185459511 0.28765226065806043243 -0.28858336694121305976 0.27684403075930180682 0.070054731283807597508 -0.38708290700188513478 -0.17626852265670961417 0.0027417274961540512301 0.03618434519876895239 0.31695962305728653252 0.27310542413832544772 0.080330213800884550657 0.10602133390838824889 0.070708865104383511468 0.79402542880139748149 0.053350320589251515324 0.39741460420884949789 0.11244046850841259155 0.15299372738858096898 -0.56617476570131042291 -0.20896659666159592139 -0.10953699635408992163 -0.032771632214836754482 0.47201006930837230424 0.12602998098362930279 -0.22209131733767675798 0.27422898323880129379 0.48404913261600968077 -0.19085021004976437942];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.363636363636364;0.363636363636364];
y1_step1.xoffset = [0.5;-6];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);

    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);

    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;

    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end