function [Y,Xf,Af] = APPROX4_C(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 27-Jan-2025 20:05:53.
%
% [Y] = APPROX4_C(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx13 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx2 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.84905506094289;-0.89661207983156;-11.8900564136425;-4.27206819854083;0.117334445616086;-0.477452394268215;-3.93907360901864;-3.41204081619662;0.44191074414151;-1.87637380752854;-0.691499300063549;-0.0999911658899677;0.481243099714201];
x1_step1.gain = [1.55105753151625;1.20876767498217;0.177016830453653;0.426837026831518;0.318106768607705;1.01183097308742;0.202423161580597;0.241345617441474;0.255153784970049;0.211806501738349;0.174628547902164;10.0099470950088;0.286382613913033];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.9363366424852657133;1.683347358139350769;1.884101493344765732;1.6459987478301310038;1.9077507030574070157;-0.87791153506909336279;0.67510154033377234306;1.265580187767738618;1.2929397944294080958;1.0335279950013505079;1.0334853312859815233;0.67872203716837820053;0.54975014647378672716;-0.61132482144181199413;-0.8645972432180277778;-0.53969478892236821821;0.305936874465805142;-0.011256146701429221857;-0.43212288721816616288;0.22249555339983290159;0.17063514679370156424;-0.28348389882229768633;0.015583069982832833955;-0.46886102339296148456;0.42225042913424049029;0.37145370701083013643;0.89632479505808126952;0.75328556114514955144;0.27342320597991176534;0.70114481346046808596;0.61822529642716728127;0.60187232535293866409;-0.86944393964054988988;-0.90144354100463175428;0.8792176613052389289;0.95648361632916423236;1.7678385894565120662;-1.2432986871184292799;-1.5448821580989071656;2.0234065541595049886];
IW1_1 = [-0.32150509714871411404 -0.64735680413281460055 -0.62961375072950664933 -0.37103800342771575682 -0.23277675323221425074 -0.78958047397648456478 -0.093545745863839721568 -0.29335613657639003637 0.36542920902803405214 0.57338790458736732525 -0.084636597051860773533 -0.18086019367515010492 0.60055136560271149548;-0.73960719350511117121 0.1648459888136725171 0.047360940931871514659 0.37539566058653456304 -0.27875852364267877936 0.79563416433806621875 -0.92634831088486091488 0.72354092761915145271 0.90708356944965384816 -0.56977644065866683842 0.25877715468942208421 -0.22912035291041268903 0.14065719589325226258;-0.12364265941112581593 -0.17337336874233691408 -0.5359121618923131658 -0.54520181044001725379 -0.2171776084818679009 0.0576196405580896992 0.16542333031338518623 -0.92249039259883269803 0.27217853601809088859 0.71407661185636672752 -1.1427092144082693359 0.00030674326546797914261 0.26934085005945268554;0.17647795211535308169 0.2348012895194691585 0.55354023600120549897 0.66223104040717828411 0.53653450980389483238 -0.22763365141584529505 -0.71983249787614600468 0.2358624113022345925 -0.54560548100480366074 0.68008368765576543424 0.070287976483602604416 0.082164770298704947749 0.295792029712383997;-0.71556921429344744201 -0.37218254195174060861 -0.33679852694699152771 0.55662937057867356572 0.59511565677396804919 -0.2090076024580820313 0.21281305579004075601 0.055024714826634048281 -0.32402442279447490892 0.32479418798765663512 -0.51566427064386000101 0.41374527396293603321 -0.36974410167847260311;0.56072225147886312069 0.030445701420376142243 -1.0874354613336252307 0.38629900137228756485 -0.38961582514573039893 -0.16515949359905240934 -0.4787777376468653201 0.0099431560013074835047 0.99191142291494793781 -0.29488749412980325149 -0.39855360756175045589 0.26773654152746528823 -0.38328241023300496648;-0.29570563794729898266 0.38944319111710357095 -0.27091832178186825431 -0.64844263457927131533 -0.22734582235363320901 -0.11510947929616612007 0.11241578578133526456 -0.8794712050085939925 0.46328248037209918131 0.20033117086233909188 0.26136229334108185274 -0.014873438252117010538 0.28467989232232360219;-0.27470709418306504812 0.06664473708738967439 0.16434708188406382812 0.27748364853482621051 -0.051813519672355548562 0.19368491223674755286 -0.46347863710698344875 0.25374528717941846612 0.18773304791321163143 0.058801971460558884186 0.091019971960724241344 0.10085263764086219163 0.79564607131900089154;-0.71845798013857953279 0.16700151247685826594 -0.78724756705425558145 0.25371940983440960382 0.069824887555237968861 0.75733976754467891013 -0.12596976377282348425 0.52490460874827127302 0.8612891873233183837 0.62190329599978522168 0.81714046935854867115 0.11991695255992247671 -0.54508326535680651226;0.0040965771383429105956 -0.060430318046604744597 -0.5739280058558140496 0.0046834780882539020497 0.48122221429484146604 -0.53118557116929565609 0.33226148487642448437 -0.044219165415555046483 0.29951994992640668114 -0.20994922018175710132 -0.049619767604178036113 -0.60166252914293993914 -0.081068997327077549353;-1.0699301054585035331 -0.64333214704535990336 0.23924016802997136177 0.055583368888124075335 -1.2621813262484997686 -0.040916394010241503854 -0.23166287333302137963 0.33593496807098843782 0.043873879777161603477 0.65733806785634951719 -0.81554225470697983003 0.17730692768590483599 0.58638738049961447452;-0.52570392682794886419 -0.30208596484922634051 0.58937018500761706452 -0.14367424182538904298 -0.27264615121426116762 -0.020237120736178282332 -0.55062446775179019198 -0.11520928497804139301 -0.056402964313028942922 0.46690646451194500743 -0.26289322182402818928 -0.037370777125140079711 0.19083175709039379431;-0.076857528324476481751 0.14177117156142651777 -0.22798720445427722581 -0.060605978893606790581 0.039015370962403699007 0.064280287957275389354 0.53803182797938775561 -0.17214687199576850229 0.37424274339380064758 0.65159820187220995891 -0.16984707797236581195 0.028154844172550021197 -0.2154226599820823207;-0.10141290473861465371 0.71364858776770334625 0.79832271182514591423 0.081158715852501672749 0.42192293201635827637 0.079976017886005862367 -0.094934634332795433953 0.99473148022891333397 -0.3259070058254494584 0.96886445878337612569 0.7084286951999680948 0.54613312718677009538 -0.297000153740626327;0.22433880658110447182 0.041683651231926827085 -0.094009540569811644861 -0.47908320681935867569 0.38368223985981692037 -0.38479724961840411357 0.46102842976535995945 0.1692203572566802483 0.073981051507610084972 0.4521978771929910379 -0.47164767008555208427 -0.01647527572373671742 -0.33553759127461929568;0.62597897266744140232 0.10004311371307882117 0.24394604712518894174 0.16054776438594370314 -0.37864217397096211482 0.53209204634186280103 0.10053453281749903658 -0.071312772033653118453 0.059948992474540677144 -0.41422264031384703475 -0.64461607915772334287 -0.16991281303525812563 -0.44578605105106317019;-0.87697367600883280314 0.088190661272322501407 0.56894705005220425065 0.43363974836625657217 -0.51677649825604676792 0.17090271207794405228 0.28084847554198794084 -0.15950870031697600426 -0.4396855371940835977 -0.75191643608729319403 -0.91564734362621380548 -0.1483049003374764252 -0.28015724542625364268;-0.86367847583031831515 -0.39400115043907829593 0.34839047632023611989 0.13386894115425507223 -0.071604541027792720231 0.11684756283727351645 0.64063373583337712702 -0.76592371785100543669 -0.59136142913407163668 -0.3968019282685270599 0.77974171113111212517 -0.053284373288189482154 0.15635383706116942615;-0.6122494715057350545 0.25497910900347792174 -0.066586858130272708056 -0.44405522570149547068 0.41021828585471509232 0.013380844468123681557 0.41824235236723178444 -0.2521747113622848091 -0.29169460518728135279 0.71556237396545174789 -0.36836590136138896989 0.78173054691930055071 0.59328712939827854544;0.22423080231640457605 -0.66856740412519888306 -0.28148994849579533906 0.43541331908994129751 0.94279336495384646888 0.17282668257503985831 -0.45335461880589350558 -0.87540023508702180521 -0.42481372784207327431 0.16662016384348049547 0.57874352829450625979 1.1175746861907451812 -0.019394352184190447735;0.3385239597149195534 0.15276102820070891486 -0.77084682062694898086 0.38949387300575549764 -0.99476013656164130605 0.30998241661435554928 0.71654470713268081372 0.22854829952286431771 0.23709708541438997975 0.48564962384076681978 -0.31328417232095523426 -0.79816895597164150278 -0.28085917833567886071;-0.4067419534195406694 0.059815270374414211685 -0.12398883219604980854 -0.95435670906454050932 0.035193052099162104585 -0.12500025328033104177 0.20596974035958248717 -0.49544812696067846991 -0.14651594323054981106 -0.010116267057071564456 0.33235684394606856973 -0.014249592962079928038 -0.75319923475167838145;0.078357230761430973764 -0.039511870482009735228 -0.29264709622577589343 -0.15290104024537887195 -0.063851910185313179302 0.013342488137427652162 0.20286004006706009895 0.11159213305932542959 -0.0071757337540627047501 -0.041424024562327493859 -0.17117973154995963503 0.0019998362846982836727 -0.80948915788465070076;-0.48374723920760220874 0.28891571918991937329 -0.23039376665865285432 0.65248190172900277783 0.047488422687243590781 0.38620049348438934 0.15843822941821170125 -0.46485954356726932879 -0.083583493252950946673 0.61527350051605933512 -0.54879161628613282176 -0.20308855832233801975 -0.3032356466712128884;0.020498260523400566729 -0.10667589289268060437 -0.54249105833589239545 -0.5009523795343635566 -0.070217603530548872159 0.15761722249730070189 0.20186472914949801782 -0.43973198943030711305 0.0054720184680111666475 0.016954856387191706568 -0.25914297769034577712 -0.04830059349085576853 -0.071112033819572026405;-0.27099377763981741252 0.25362599582033668044 0.5624624238257193154 0.10661545319555024158 -0.31003292413896837987 0.24948540446950684402 -0.12210860035062061357 -0.26543268159130267714 0.083289492065122372466 0.52958999465533129758 0.20643723178175119037 0.23567467102337491536 0.55090069610948144696;1.1926502320860354889 -0.72589809086950518591 0.30912398529602674868 -0.42636777100036549193 -0.015926177116578510429 -0.3636461984245816792 -0.41342931914259423154 -0.7773196024529728243 0.55287217359901641434 -0.5744234844094662229 1.1367448714645738139 0.86663553258284875547 0.41910482190084680232;0.25525987062317778697 -0.038272900991914625413 0.82997384587883349383 -0.57009971843387996504 -0.16135683211175011476 -0.74270458571421871241 0.7563682544509227057 -0.20870190199498439565 0.56845395574301760266 -0.47877777586731923298 -0.011977540832297517426 -0.4896203025151456556 0.017375638943522602603;0.24572710274080872273 -0.0077043487486595507718 -0.18998460040084827471 -0.061644799964817156845 -0.26274143190789306379 0.081696026255887330136 0.31628972924253950794 0.24609604464594503348 -0.043875051574902068641 0.16388371453330635719 -0.023769961596960403893 -0.014626408250545440762 0.82068124493318705959;0.26619862657412890483 -0.17468326099207551194 0.029152693979518001788 0.59741886159700263725 -0.0091242660555706789349 0.069465991953860481423 -0.24537381413018716225 0.233178400468034841 -0.036650373722069320981 -0.17211645304478051521 0.078271079589996045422 0.066859365008045512635 -0.37514560807273100718;0.64163200758294414161 -0.38123910469924615629 -0.89163233284407805712 0.59739957034126134339 -0.35027803909348032008 0.82152472787308039592 0.52678166568562445615 0.33473019732829928374 0.37772820635994747152 0.67111951997300978157 -0.47265225200476895795 0.35500555955129897701 -0.12411761928420148027;0.54383269586268556672 0.47294162532005207256 -0.71612739439382055995 -0.19996611065059405332 -0.40465780080400221008 -0.45309335932642569311 -0.28887814664305144774 -0.35371947700253431046 -0.78162146913972230244 0.4680323830895842252 -0.97912239672527445755 0.67389611255529580092 0.36767082691823149698;-0.33088141682388638731 -0.22608346701285866875 -0.43301816086625760649 -0.099961636142836693408 0.1481409837917452843 -0.3251512005984985576 0.33914321258384350077 0.0060693724428269452131 -0.11399763037364336882 0.48564916500267818478 0.36728365649005645377 0.28056256651879218911 -0.035147170198870994473;-0.71415813931781657597 0.55549113669621241751 0.45077327194179117598 0.61639212826738942752 -0.42909436087199409604 0.55832821592485049056 -0.2120958859079804526 -0.52646354242103488019 -0.20494218887199958101 0.35817865086172090416 -0.31309220315037994409 -0.17168613464417020742 0.048207011470578209344;0.73164943194574094676 -0.14217669974356625384 -0.22383093953620480931 0.4807381106858187314 0.86766532464115542211 -0.14245161204168604874 0.11798161304949247863 0.74941440194282915588 -0.027391895599900836777 -0.36561917269018651133 0.85179749905253332454 0.76049962372302615243 -0.029049070171179205979;0.0013776956680600430105 0.13734780349877662164 0.20805772191314400588 0.086379227918224193994 0.27831518610561650773 0.11591962531591867847 -0.34293334546715270594 0.86766840140822620864 0.5972490996532029417 0.10156899229525299944 -0.82430536664830100779 -0.18430912673103172494 -0.30114140031235109296;-0.37539408171902938216 0.38949796790543511626 -0.14043503922959180152 -0.70000210613948210536 0.041314031582845384127 0.18674286041533957881 0.452589757873873344 -0.3027244466650482746 -0.088022863357746713997 0.59667633021249244507 -0.21148798252993403213 0.53700604169092014395 0.55102316647357563184;-0.60583332759557140257 0.37939027916123174711 0.25632172642979567101 -0.0093333954975185033642 -0.23746745994432955085 0.5909927897492035509 0.24855645096843478892 -1.0798287193695010888 0.53012970355245347953 0.91032113429441230412 0.046194416211744929179 0.00082981195768981608207 -0.71996790852857228682;-0.059104416646743651587 0.071351610738417961532 -0.42764157237823124946 -0.88399757247552646078 -0.60115503155781591094 0.14609377409436452577 -0.13677852873629262054 0.95340037322384008078 -0.081329147682756550153 -0.39646563567522402627 -0.18723387649736367155 0.49021963112554944875 -0.558977370729903833;0.079048560535374817748 -0.71311342195158811119 0.34880317273612509998 0.44126417273805434993 -0.65067371328100453987 0.65530171006772319764 0.52802577196910693846 0.083113030484833025358 -0.58243904840098903453 0.075718892647487115455 0.47124150694928623739 -0.57985635201163665542 -0.54263546140077056901];

% Layer 2
b2 = [-0.2281336782888364334;-0.73638332119988092472];
LW2_1 = [-0.024277895380716472962 -0.072994121356076552276 0.047987356740236859765 -0.050641756077763222521 0.0016273536524677276356 0.045738329367680262416 0.068926178005068131083 0.47410501623451550834 -0.014110723168241185235 0.13617038144408552536 0.00091391252135468795115 -0.014293439517956602752 -0.066674288181506252693 -0.010984942011851761903 -0.076966679407486637832 0.0054357438876571090997 0.018737661287723458847 0.024376903645043548202 0.057825858042394318037 -0.0083923270033148013314 -0.0091403740036126931989 -0.14614803799692493991 -0.7870184074160172516 -0.034821929817835384213 0.21584371952965999975 -0.23119705816108626628 0.013738436810240105615 -0.06635045624628806149 0.25104026970885295889 -0.30281091425989953292 0.0058718363189732038221 0.015823646783435181551 -0.022619798401648745501 0.048415043746227626187 0.0016760877967490874288 -0.038588826846722060204 0.12970273101834595142 -0.086549093276417826681 0.1901684796639148689 0.010022973986453190959;-0.09081570387840592895 -0.22197805705224471495 0.095479632144775797298 0.41527695767336547661 0.37478842755708147161 0.23278586970975143067 0.15461611615224196692 -0.036330753960071883457 0.059334388805098538244 0.071619527841517982569 -0.21872511787276607831 0.62227397472330547856 -0.76532281284674064104 -0.047870758834026722051 -0.61170084351318765314 0.085773118038886778103 0.0085132872458991339787 -0.12926934618287794221 0.13939910848973940949 -0.07064962615185813033 -0.015973260246593817824 0.26969033100950645654 0.45159452476576505964 0.30141912390526015564 -0.36464907805995055989 -0.24553714857011113559 0.15170627866374775117 -0.0011508446990712720495 0.06150868254547013636 -0.093665709907798516687 0.06005095970828331492 0.050431248098312279893 -0.24727500991324533053 0.098850396737308277029 -0.098153676380161231085 -0.28563333343523689134 0.21430642776794728288 -0.32853931903226329947 -0.05903770699460034882 -0.025996159262822643443];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.363636363636364;0.363636363636364];
y1_step1.xoffset = [0.5;-6];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);

    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);

    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;

    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end